{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\negis\\\\OneDrive\\\\Desktop\\\\new project\\\\blockfest-ui\\\\src\\\\contexts\\\\VIPContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useAuth } from './AuthContext';\nimport { checkVIPApi } from '../firebase/index';\nimport { toast } from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VIPContext = /*#__PURE__*/createContext(undefined);\nexport const VIPProvider = ({\n  children\n}) => {\n  _s();\n  const [isVIP, setIsVIP] = useState(() => {\n    // Initialize from localStorage if available\n    if (typeof window !== 'undefined') {\n      const storedStatus = localStorage.getItem('vip_status');\n      return storedStatus ? storedStatus === 'true' : null;\n    }\n    return null;\n  });\n  const [checkingVIP, setCheckingVIP] = useState(false);\n  const {\n    user\n  } = useAuth();\n\n  // Only check stored VIP status when user changes\n  useEffect(() => {\n    if (!user) {\n      setIsVIP(null);\n      localStorage.removeItem('vip_status');\n      return;\n    }\n    const storedStatus = localStorage.getItem(`vip_status_${user.uid}`);\n    if (storedStatus) {\n      setIsVIP(storedStatus === 'true');\n      console.log(\"Retrieved stored VIP status:\", storedStatus === 'true');\n    }\n  }, [user]);\n  const checkVIPStatus = async (name, rollNumber) => {\n    if (!user) {\n      toast.error(\"Please log in before checking VIP status.\");\n      return false;\n    }\n    if (checkingVIP) {\n      return false;\n    }\n    setCheckingVIP(true);\n    const toastId = 'vip-check';\n    try {\n      const response = await checkVIPApi(name, rollNumber);\n\n      // Store the VIP status\n      if (response.isVIP) {\n        localStorage.setItem(`vip_status_${user.uid}`, 'true');\n        localStorage.setItem('vip_status', 'true');\n      } else {\n        localStorage.removeItem(`vip_status_${user.uid}`);\n        localStorage.removeItem('vip_status');\n      }\n      setIsVIP(response.isVIP);\n      if (response.isVIP) {\n        toast.success('✅ VIP Status Verified!');\n      } else {\n        toast.error('❌ Access Denied. Not on VIP list.');\n      }\n      return response.isVIP;\n    } catch (error) {\n      console.error(\"VIP Check API Error:\", error);\n      toast.error(error.message || 'Error checking VIP status.');\n      setIsVIP(false);\n      return false;\n    } finally {\n      setCheckingVIP(false);\n      toast.dismiss(toastId);\n    }\n  };\n  const resetVIP = () => {\n    setIsVIP(null);\n    if (user) {\n      localStorage.removeItem(`vip_status_${user.uid}`);\n      localStorage.removeItem('vip_status');\n    }\n  };\n  const value = {\n    isVIP,\n    checkingVIP,\n    checkVIPStatus,\n    resetVIP\n  };\n  return /*#__PURE__*/_jsxDEV(VIPContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n};\n_s(VIPProvider, \"d6ntTEPi0grIWa5dif4OIS23xpU=\", false, function () {\n  return [useAuth];\n});\n_c = VIPProvider;\nexport const useVIP = () => {\n  _s2();\n  const context = useContext(VIPContext);\n  if (!context) {\n    throw new Error('useVIP must be used within a VIPProvider');\n  }\n  return context;\n};\n_s2(useVIP, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"VIPProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useAuth","checkVIPApi","toast","jsxDEV","_jsxDEV","VIPContext","undefined","VIPProvider","children","_s","isVIP","setIsVIP","window","storedStatus","localStorage","getItem","checkingVIP","setCheckingVIP","user","removeItem","uid","console","log","checkVIPStatus","name","rollNumber","error","toastId","response","setItem","success","message","dismiss","resetVIP","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useVIP","_s2","context","Error","$RefreshReg$"],"sources":["C:/Users/negis/OneDrive/Desktop/new project/blockfest-ui/src/contexts/VIPContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useAuth } from './AuthContext';\nimport { checkVIPApi } from '../firebase/index';\nimport { toast } from 'react-hot-toast';\n\ninterface VIPContextType {\n    isVIP: boolean | null;\n    checkingVIP: boolean;\n    checkVIPStatus: (name: string, rollNumber: string) => Promise<boolean>;\n    resetVIP: () => void;\n}\n\nconst VIPContext = createContext<VIPContextType | undefined>(undefined);\n\nexport const VIPProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n    const [isVIP, setIsVIP] = useState<boolean | null>(() => {\n        // Initialize from localStorage if available\n        if (typeof window !== 'undefined') {\n            const storedStatus = localStorage.getItem('vip_status');\n            return storedStatus ? storedStatus === 'true' : null;\n        }\n        return null;\n    });\n    const [checkingVIP, setCheckingVIP] = useState<boolean>(false);\n    const { user } = useAuth();\n    \n    // Only check stored VIP status when user changes\n    useEffect(() => {\n        if (!user) {\n            setIsVIP(null);\n            localStorage.removeItem('vip_status');\n            return;\n        }\n\n        const storedStatus = localStorage.getItem(`vip_status_${user.uid}`);\n        if (storedStatus) {\n            setIsVIP(storedStatus === 'true');\n            console.log(\"Retrieved stored VIP status:\", storedStatus === 'true');\n        }\n    }, [user]);\n\n    const checkVIPStatus = async (name: string, rollNumber: string): Promise<boolean> => {\n        if (!user) {\n            toast.error(\"Please log in before checking VIP status.\");\n            return false;\n        }\n        \n        if (checkingVIP) {\n            return false;\n        }\n        \n        setCheckingVIP(true);\n        const toastId = 'vip-check';\n        \n        try {\n            const response = await checkVIPApi(name, rollNumber);\n            \n            // Store the VIP status\n            if (response.isVIP) {\n                localStorage.setItem(`vip_status_${user.uid}`, 'true');\n                localStorage.setItem('vip_status', 'true');\n            } else {\n                localStorage.removeItem(`vip_status_${user.uid}`);\n                localStorage.removeItem('vip_status');\n            }\n            \n            setIsVIP(response.isVIP);\n            \n            if (response.isVIP) {\n                toast.success('✅ VIP Status Verified!');\n            } else {\n                toast.error('❌ Access Denied. Not on VIP list.');\n            }\n            \n            return response.isVIP;\n        } catch (error: any) {\n            console.error(\"VIP Check API Error:\", error);\n            toast.error(error.message || 'Error checking VIP status.');\n            setIsVIP(false);\n            return false;\n        } finally {\n            setCheckingVIP(false);\n            toast.dismiss(toastId);\n        }\n    };\n\n    const resetVIP = () => {\n        setIsVIP(null);\n        if (user) {\n            localStorage.removeItem(`vip_status_${user.uid}`);\n            localStorage.removeItem('vip_status');\n        }\n    };\n\n    const value = { isVIP, checkingVIP, checkVIPStatus, resetVIP };\n\n    return (\n        <VIPContext.Provider value={value}>\n            {children}\n        </VIPContext.Provider>\n    );\n};\n\nexport const useVIP = (): VIPContextType => {\n    const context = useContext(VIPContext);\n    if (!context) {\n        throw new Error('useVIP must be used within a VIPProvider');\n    }\n    return context;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}