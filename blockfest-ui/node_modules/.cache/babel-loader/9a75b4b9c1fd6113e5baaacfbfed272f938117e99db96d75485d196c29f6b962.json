{"ast":null,"code":"// src/utils/blockchain.ts\n\nimport { ethers, parseEther } from 'ethers';\nimport { toast } from 'react-hot-toast';\n// Ensure EventDetails and TicketData are defined in src/types/global.d.ts\n// and imported if not automatically available in the global scope.\n// For this file, we'll re-declare simplified versions if not globally available.\n// It's better to import them from a central types file.\n\n// --- Configuration ---\nconst CONTRACT_ADDRESS = process.env.REACT_APP_CONTRACT_ADDRESS || '0x6371647dc719E2482223c32880e2f2c9F44c9953'; // Default to your provided address\nconst TARGET_NETWORK_ID = parseInt(process.env.REACT_APP_TARGET_NETWORK_ID || '11155111', 10);\nconst TARGET_NETWORK_NAME = process.env.REACT_APP_TARGET_NETWORK_NAME || 'Sepolia Testnet';\nif (CONTRACT_ADDRESS === 'YOUR_DEPLOYED_EVENT_MANAGER_ADDRESS' || CONTRACT_ADDRESS === '0x0000000000000000000000000000000000000000') {\n  console.warn('Contract address not configured. Please set REACT_APP_CONTRACT_ADDRESS in your .env file.');\n  // toast.error('Contract address not configured in .env file.'); // Toast can be too early\n}\n\n// --- ABIs (User Provided) ---\nconst EVENT_MANAGER_ABI = [{\n  \"type\": \"constructor\",\n  \"inputs\": [{\n    \"name\": \"_ticketNFT\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"_staking\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"_validator\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"_sybil\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"buyTicket\",\n  \"inputs\": [{\n    \"name\": \"tokenURI\",\n    \"type\": \"string\",\n    \"internalType\": \"string\"\n  }, {\n    \"name\": \"qrHash\",\n    \"type\": \"string\",\n    \"internalType\": \"string\"\n  }, {\n    \"name\": \"outsider\",\n    \"type\": \"bool\",\n    \"internalType\": \"bool\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"payable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"cancelEvent\",\n  \"inputs\": [],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"eventActive\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"bool\",\n    \"internalType\": \"bool\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"getStakedAmount\",\n  \"inputs\": [{\n    \"name\": \"user\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"getSybilScore\",\n  \"inputs\": [{\n    \"name\": \"user\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"hasTicket\",\n  \"inputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"bool\",\n    \"internalType\": \"bool\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"isOutsider\",\n  \"inputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"bool\",\n    \"internalType\": \"bool\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"isValidator\",\n  \"inputs\": [{\n    \"name\": \"user\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"bool\",\n    \"internalType\": \"bool\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"issuedTickets\",\n  \"inputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"maxTickets\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"ownedTickets\",\n  \"inputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"owner\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"refillTickets\",\n  \"inputs\": [{\n    \"name\": \"amount\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"refunded\",\n  \"inputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"bool\",\n    \"internalType\": \"bool\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"renounceOwnership\",\n  \"inputs\": [],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"sellTicketBack\",\n  \"inputs\": [{\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"setEventActive\",\n  \"inputs\": [{\n    \"name\": \"active\",\n    \"type\": \"bool\",\n    \"internalType\": \"bool\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"setTicketPrices\",\n  \"inputs\": [{\n    \"name\": \"insiderPrice\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }, {\n    \"name\": \"outsiderPrice\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"staking\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\",\n    \"internalType\": \"contract Staking\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"sybil\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\",\n    \"internalType\": \"contract SybilGuard\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"ticketCount\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"ticketNFT\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\",\n    \"internalType\": \"contract TicketNFT\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"ticketPriceInsider\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"ticketPriceOutsider\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"transferOwnership\",\n  \"inputs\": [{\n    \"name\": \"newOwner\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"validator\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\",\n    \"internalType\": \"contract ValidatorPoS\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"withdrawFunds\",\n  \"inputs\": [],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"event\",\n  \"name\": \"OwnershipTransferred\",\n  \"inputs\": [{\n    \"name\": \"previousOwner\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"newOwner\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }],\n  \"anonymous\": false\n}, {\n  \"type\": \"event\",\n  \"name\": \"TicketPurchased\",\n  \"inputs\": [{\n    \"name\": \"buyer\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"indexed\": false,\n    \"internalType\": \"uint256\"\n  }],\n  \"anonymous\": false\n}, {\n  \"type\": \"event\",\n  \"name\": \"TicketRefunded\",\n  \"inputs\": [{\n    \"name\": \"holder\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"indexed\": false,\n    \"internalType\": \"uint256\"\n  }],\n  \"anonymous\": false\n}, {\n  \"type\": \"error\",\n  \"name\": \"OwnableInvalidOwner\",\n  \"inputs\": [{\n    \"name\": \"owner\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }]\n}, {\n  \"type\": \"error\",\n  \"name\": \"OwnableUnauthorizedAccount\",\n  \"inputs\": [{\n    \"name\": \"account\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }]\n}];\nconst TICKET_NFT_ABI = [{\n  \"type\": \"constructor\",\n  \"inputs\": [{\n    \"name\": \"initialOwner\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"approve\",\n  \"inputs\": [{\n    \"name\": \"to\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"balanceOf\",\n  \"inputs\": [{\n    \"name\": \"owner\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"burn\",\n  \"inputs\": [{\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"eventManager\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"getApproved\",\n  \"inputs\": [{\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"getQRHash\",\n  \"inputs\": [{\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"string\",\n    \"internalType\": \"string\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"isApprovedForAll\",\n  \"inputs\": [{\n    \"name\": \"owner\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"operator\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"bool\",\n    \"internalType\": \"bool\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"mintTicket\",\n  \"inputs\": [{\n    \"name\": \"to\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"tokenURI\",\n    \"type\": \"string\",\n    \"internalType\": \"string\"\n  }, {\n    \"name\": \"qrHash\",\n    \"type\": \"string\",\n    \"internalType\": \"string\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"name\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"string\",\n    \"internalType\": \"string\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"nextTokenId\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"owner\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"ownerOf\",\n  \"inputs\": [{\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"qrHashes\",\n  \"inputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"string\",\n    \"internalType\": \"string\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"renounceOwnership\",\n  \"inputs\": [],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"safeTransferFrom\",\n  \"inputs\": [{\n    \"name\": \"from\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"to\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"safeTransferFrom\",\n  \"inputs\": [{\n    \"name\": \"from\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"to\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }, {\n    \"name\": \"data\",\n    \"type\": \"bytes\",\n    \"internalType\": \"bytes\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"setApprovalForAll\",\n  \"inputs\": [{\n    \"name\": \"operator\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"approved\",\n    \"type\": \"bool\",\n    \"internalType\": \"bool\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"setEventManager\",\n  \"inputs\": [{\n    \"name\": \"_eventManager\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"supportsInterface\",\n  \"inputs\": [{\n    \"name\": \"interfaceId\",\n    \"type\": \"bytes4\",\n    \"internalType\": \"bytes4\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"bool\",\n    \"internalType\": \"bool\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"symbol\",\n  \"inputs\": [],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"string\",\n    \"internalType\": \"string\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"tokenURI\",\n  \"inputs\": [{\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"string\",\n    \"internalType\": \"string\"\n  }],\n  \"stateMutability\": \"view\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"transferFrom\",\n  \"inputs\": [{\n    \"name\": \"from\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"to\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"function\",\n  \"name\": \"transferOwnership\",\n  \"inputs\": [{\n    \"name\": \"newOwner\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }],\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\"\n}, {\n  \"type\": \"event\",\n  \"name\": \"Approval\",\n  \"inputs\": [{\n    \"name\": \"owner\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"approved\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"indexed\": true,\n    \"internalType\": \"uint256\"\n  }],\n  \"anonymous\": false\n}, {\n  \"type\": \"event\",\n  \"name\": \"ApprovalForAll\",\n  \"inputs\": [{\n    \"name\": \"owner\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"operator\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"approved\",\n    \"type\": \"bool\",\n    \"indexed\": false,\n    \"internalType\": \"bool\"\n  }],\n  \"anonymous\": false\n}, {\n  \"type\": \"event\",\n  \"name\": \"BatchMetadataUpdate\",\n  \"inputs\": [{\n    \"name\": \"_fromTokenId\",\n    \"type\": \"uint256\",\n    \"indexed\": false,\n    \"internalType\": \"uint256\"\n  }, {\n    \"name\": \"_toTokenId\",\n    \"type\": \"uint256\",\n    \"indexed\": false,\n    \"internalType\": \"uint256\"\n  }],\n  \"anonymous\": false\n}, {\n  \"type\": \"event\",\n  \"name\": \"EventManagerSet\",\n  \"inputs\": [{\n    \"name\": \"newManager\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }],\n  \"anonymous\": false\n}, {\n  \"type\": \"event\",\n  \"name\": \"MetadataUpdate\",\n  \"inputs\": [{\n    \"name\": \"_tokenId\",\n    \"type\": \"uint256\",\n    \"indexed\": false,\n    \"internalType\": \"uint256\"\n  }],\n  \"anonymous\": false\n}, {\n  \"type\": \"event\",\n  \"name\": \"OwnershipTransferred\",\n  \"inputs\": [{\n    \"name\": \"previousOwner\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"newOwner\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }],\n  \"anonymous\": false\n}, {\n  \"type\": \"event\",\n  \"name\": \"TicketBurned\",\n  \"inputs\": [{\n    \"name\": \"user\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"indexed\": true,\n    \"internalType\": \"uint256\"\n  }],\n  \"anonymous\": false\n}, {\n  \"type\": \"event\",\n  \"name\": \"TicketMinted\",\n  \"inputs\": [{\n    \"name\": \"to\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"indexed\": true,\n    \"internalType\": \"uint256\"\n  }, {\n    \"name\": \"tokenURI\",\n    \"type\": \"string\",\n    \"indexed\": false,\n    \"internalType\": \"string\"\n  }, {\n    \"name\": \"qrHash\",\n    \"type\": \"string\",\n    \"indexed\": false,\n    \"internalType\": \"string\"\n  }],\n  \"anonymous\": false\n}, {\n  \"type\": \"event\",\n  \"name\": \"Transfer\",\n  \"inputs\": [{\n    \"name\": \"from\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"to\",\n    \"type\": \"address\",\n    \"indexed\": true,\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"indexed\": true,\n    \"internalType\": \"uint256\"\n  }],\n  \"anonymous\": false\n}, {\n  \"type\": \"error\",\n  \"name\": \"ERC721IncorrectOwner\",\n  \"inputs\": [{\n    \"name\": \"sender\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }, {\n    \"name\": \"owner\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }]\n}, {\n  \"type\": \"error\",\n  \"name\": \"ERC721InsufficientApproval\",\n  \"inputs\": [{\n    \"name\": \"operator\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }, {\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }]\n}, {\n  \"type\": \"error\",\n  \"name\": \"ERC721InvalidApprover\",\n  \"inputs\": [{\n    \"name\": \"approver\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }]\n}, {\n  \"type\": \"error\",\n  \"name\": \"ERC721InvalidOperator\",\n  \"inputs\": [{\n    \"name\": \"operator\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }]\n}, {\n  \"type\": \"error\",\n  \"name\": \"ERC721InvalidOwner\",\n  \"inputs\": [{\n    \"name\": \"owner\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }]\n}, {\n  \"type\": \"error\",\n  \"name\": \"ERC721InvalidReceiver\",\n  \"inputs\": [{\n    \"name\": \"receiver\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }]\n}, {\n  \"type\": \"error\",\n  \"name\": \"ERC721InvalidSender\",\n  \"inputs\": [{\n    \"name\": \"sender\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }]\n}, {\n  \"type\": \"error\",\n  \"name\": \"ERC721NonexistentToken\",\n  \"inputs\": [{\n    \"name\": \"tokenId\",\n    \"type\": \"uint256\",\n    \"internalType\": \"uint256\"\n  }]\n}, {\n  \"type\": \"error\",\n  \"name\": \"OwnableInvalidOwner\",\n  \"inputs\": [{\n    \"name\": \"owner\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }]\n}, {\n  \"type\": \"error\",\n  \"name\": \"OwnableUnauthorizedAccount\",\n  \"inputs\": [{\n    \"name\": \"account\",\n    \"type\": \"address\",\n    \"internalType\": \"address\"\n  }]\n}];\n// --- Helper Functions ---\nconst getProvider = () => {/* ... as provided in step 7 ... */};\nconst getSigner = async provider => {/* ... as provided in step 7 ... */};\nconst getEventManagerContract = async (readOnly = false) => {/* ... as provided in step 7 ... */};\nconst getTicketNFTContract = async (readOnly = false) => {/* ... as provided in step 7 ... */};\n\n// --- Core Blockchain Functions ---\nexport const connectWallet = async () => {/* ... as provided in step 7 ... */};\nexport const checkNetwork = async () => {/* ... as provided in step 7 ... */};\n\n// Corrected switchNetwork (no argument)\nexport const switchNetwork = async () => {\n  const provider = getProvider();\n  if (!provider || !window.ethereum) {\n    toast.error(\"MetaMask is not available to switch network.\");\n    return false;\n  }\n  try {\n    // Ethers v6 uses ethers.toQuantity for chainId\n    await window.ethereum.request({\n      method: 'wallet_switchEthereumChain',\n      params: [{\n        chainId: ethers.toQuantity(TARGET_NETWORK_ID)\n      }]\n    });\n    return true;\n  } catch (switchError) {\n    console.error('Network switch failed:', switchError);\n    if (switchError.code === 4902) {\n      // Chain not added\n      toast.error(`Network \"${TARGET_NETWORK_NAME}\" not added to MetaMask. Please add it manually.`);\n      // TODO: Optionally add wallet_addEthereumChain logic here\n    } else if (switchError.code === 4001) {\n      // User rejected\n      toast.info('Network switch request rejected by user.');\n    } else {\n      toast.error('Failed to switch network.');\n    }\n    return false;\n  }\n};\n\n// Corrected buyTicket\nexport const buyTicket = async (tokenURI, qrHash, outsider, priceInEther) => {\n  const contract = await getEventManagerContract(false);\n  if (!contract) throw new Error(\"EventManager Contract not available for transaction.\");\n  if (!priceInEther) throw new Error(\"Price is required to buy ticket.\");\n  try {\n    var _receipt$transactionH;\n    const value = parseEther(priceInEther);\n    console.log(`Calling EventManager.buyTicket with URI: ${tokenURI}, QR: ${qrHash}, Outsider: ${outsider}, Value: ${value.toString()}`);\n    const tx = await contract.buyTicket(tokenURI, qrHash, outsider, {\n      value\n    });\n    const receipt = await tx.wait(); // Wait for 1 confirmation\n    console.log(`Transaction Confirmed: ${receipt === null || receipt === void 0 ? void 0 : receipt.transactionHash}`);\n    return (_receipt$transactionH = receipt === null || receipt === void 0 ? void 0 : receipt.transactionHash) !== null && _receipt$transactionH !== void 0 ? _receipt$transactionH : null;\n  } catch (error) {\n    var _error$data;\n    console.error(\"Buy Ticket Error:\", error);\n    const reason = error.reason || (error === null || error === void 0 ? void 0 : (_error$data = error.data) === null || _error$data === void 0 ? void 0 : _error$data.message) || error.message || 'Unknown error during purchase.';\n    if (error.code === 4001) throw new Error('Transaction rejected by user.');\n    throw new Error(`Purchase Failed: ${reason}`);\n  }\n};\n\n// --- CORRECTED getMyTickets using Event Querying ---\nexport const getMyTickets = async userAddress => {\n  if (!userAddress) {\n    console.warn(\"getMyTickets: userAddress is undefined or null.\");\n    return [];\n  }\n  const provider = getProvider();\n  const nftContract = await getTicketNFTContract(true); // Get read-only NFT contract\n\n  if (!provider || !nftContract) {\n    console.error(\"getMyTickets: Could not get Provider or TicketNFT contract instance.\");\n    throw new Error(\"Failed to connect to NFT contract for fetching tickets.\");\n  }\n  try {\n    const nftContractAddress = await nftContract.getAddress();\n    console.log(`Querying Transfer events for recipient ${userAddress} on NFT contract ${nftContractAddress}`);\n    const filterTo = nftContract.filters.Transfer(null, userAddress);\n    const filterFrom = nftContract.filters.Transfer(userAddress);\n\n    // It's better to get a starting block for performance, but 'earliest' can work for testing.\n    // const startBlock = 0; // Or a more recent block number\n    const transferEventsTo = await nftContract.queryFilter(filterTo, 'earliest', 'latest');\n    const transferEventsFrom = await nftContract.queryFilter(filterFrom, 'earliest', 'latest');\n    console.log(`Found ${transferEventsTo.length} Transfer(to) events and ${transferEventsFrom.length} Transfer(from) events.`);\n    const ownedTokenIds = new Map();\n    transferEventsTo.forEach(event => {\n      // Use 'any' for event if specific type is complex\n      if (event.args && typeof event.args.tokenId !== 'undefined') {\n        ownedTokenIds.set(Number(event.args.tokenId), true);\n      }\n    });\n    transferEventsFrom.forEach(event => {\n      if (event.args && typeof event.args.tokenId !== 'undefined') {\n        ownedTokenIds.delete(Number(event.args.tokenId));\n      }\n    });\n    const finalOwnedIds = Array.from(ownedTokenIds.keys());\n    console.log(\"Final calculated owned ticket IDs:\", finalOwnedIds);\n    return finalOwnedIds.sort((a, b) => a - b); // Sort for consistency\n  } catch (error) {\n    console.error(\"Error querying Transfer events in getMyTickets:\", error);\n    throw new Error(\"Failed to fetch owned tickets. Contract interaction failed.\");\n  }\n};\n\n// resellTicket (uses EventManager)\nexport const resellTicket = async tokenId => {\n  const contract = await getEventManagerContract(false);\n  if (!contract) throw new Error(\"EventManager Contract not available for transaction.\");\n  try {\n    var _receipt$transactionH2;\n    console.log(`Calling EventManager.sellTicketBack(${tokenId})`);\n    const tx = await contract.sellTicketBack(tokenId);\n    const receipt = await tx.wait();\n    console.log(`Resale Confirmed: ${receipt === null || receipt === void 0 ? void 0 : receipt.transactionHash}`);\n    return (_receipt$transactionH2 = receipt === null || receipt === void 0 ? void 0 : receipt.transactionHash) !== null && _receipt$transactionH2 !== void 0 ? _receipt$transactionH2 : null;\n  } catch (error) {\n    var _error$data2;\n    console.error(`Resell Ticket Error (ID: ${tokenId}):`, error);\n    const reason = error.reason || (error === null || error === void 0 ? void 0 : (_error$data2 = error.data) === null || _error$data2 === void 0 ? void 0 : _error$data2.message) || error.message || 'Unknown error during resale.';\n    if (error.code === 4001) throw new Error('Transaction rejected by user.');\n    throw new Error(`Resale Failed: ${reason}`);\n  }\n};\n\n// getEventDetails (uses EventManager)\nexport const getEventDetails = async () => {\n  const contract = await getEventManagerContract(true);\n  if (!contract) {\n    console.error(\"getEventDetails: EventManager contract instance is null.\");\n    return null;\n  }\n  try {\n    console.log(\"Fetching event details from EventManager contract...\");\n    const details = {\n      ticketPriceInsider: await contract.ticketPriceInsider(),\n      ticketPriceOutsider: await contract.ticketPriceOutsider(),\n      maxTickets: await contract.maxTickets(),\n      soldTickets: await contract.ticketCount(),\n      isActive: await contract.eventActive() // Assuming eventActive is part of your contract\n      // Add other relevant fields like eventName, eventDate if they exist as view functions\n    };\n    console.log(\"Successfully fetched event details:\", details);\n    return details;\n  } catch (error) {\n    console.error(\"Failed to fetch event details from contract:\", error);\n    toast.error(\"Error fetching event details from blockchain.\");\n    return null;\n  }\n};\n\n// getTokenMetadataURI (uses TicketNFT)\nexport const getTokenMetadataURI = async tokenId => {\n  const nftContract = await getTicketNFTContract(true);\n  if (!nftContract) return null;\n  try {\n    const uri = await nftContract.tokenURI(tokenId);\n    return uri;\n  } catch (error) {\n    console.error(`Error getting token URI for token ${tokenId}:`, error.message);\n    return null;\n  }\n};\n\n// --- Updated getAvailableTickets (fetches ALL issued IDs from EventManager) ---\nexport const getAvailableTickets = async () => {\n  const contract = await getEventManagerContract(true);\n  if (!contract) return [];\n  try {\n    const countBN = await contract.ticketCount();\n    const count = Number(countBN);\n    if (count === 0) {\n      console.log(\"No tickets issued yet according to ticketCount.\");\n      return [];\n    }\n    console.log(`Total tickets issued (ticketCount): ${count}. Fetching IDs from issuedTickets array...`);\n    const ids = [];\n    // Your 'issuedTickets' in EventManager is a public array getter `issuedTickets(uint256 index)`\n    // Loop from 0 to count-1 to get each tokenId\n    for (let i = 0; i < count; i++) {\n      try {\n        const tokenIdBN = await contract.issuedTickets(i);\n        ids.push(Number(tokenIdBN));\n      } catch (loopError) {\n        console.error(`Error fetching issued ticket at index ${i}:`, loopError);\n        // Break or continue based on how you want to handle gaps if any\n        break;\n      }\n    }\n    console.log(\"All issued ticket IDs fetched from EventManager:\", ids);\n    return ids;\n  } catch (error) {\n    console.error(\"Error getting available/issued tickets:\", error);\n    toast.error(\"Could not retrieve list of issued tickets.\");\n    return [];\n  }\n};\n\n// getQRHash (uses TicketNFT)\nexport const getQRHash = async tokenId => {\n  const nftContract = await getTicketNFTContract(true);\n  if (!nftContract) return null;\n  try {\n    const qrHash = await nftContract.getQRHash(tokenId);\n    return qrHash;\n  } catch (error) {\n    console.error(`Error getting QR Hash for token ${tokenId}:`, error.message);\n    return null;\n  }\n};\n\n// --- (Removed testContractSetup and debugContractInterface for brevity, can be added back if needed) ---","map":{"version":3,"names":["ethers","parseEther","toast","CONTRACT_ADDRESS","process","env","REACT_APP_CONTRACT_ADDRESS","TARGET_NETWORK_ID","parseInt","REACT_APP_TARGET_NETWORK_ID","TARGET_NETWORK_NAME","REACT_APP_TARGET_NETWORK_NAME","console","warn","EVENT_MANAGER_ABI","TICKET_NFT_ABI","getProvider","getSigner","provider","getEventManagerContract","readOnly","getTicketNFTContract","connectWallet","checkNetwork","switchNetwork","window","ethereum","error","request","method","params","chainId","toQuantity","switchError","code","info","buyTicket","tokenURI","qrHash","outsider","priceInEther","contract","Error","_receipt$transactionH","value","log","toString","tx","receipt","wait","transactionHash","_error$data","reason","data","message","getMyTickets","userAddress","nftContract","nftContractAddress","getAddress","filterTo","filters","Transfer","filterFrom","transferEventsTo","queryFilter","transferEventsFrom","length","ownedTokenIds","Map","forEach","event","args","tokenId","set","Number","delete","finalOwnedIds","Array","from","keys","sort","a","b","resellTicket","_receipt$transactionH2","sellTicketBack","_error$data2","getEventDetails","details","ticketPriceInsider","ticketPriceOutsider","maxTickets","soldTickets","ticketCount","isActive","eventActive","getTokenMetadataURI","uri","getAvailableTickets","countBN","count","ids","i","tokenIdBN","issuedTickets","push","loopError","getQRHash"],"sources":["C:/Users/negis/OneDrive/Desktop/new project/blockfest-ui/src/utils/blockchain.ts"],"sourcesContent":["// src/utils/blockchain.ts\n\nimport { ethers, parseEther, formatEther, BigNumberish } from 'ethers';\nimport { toast } from 'react-hot-toast';\n// Ensure EventDetails and TicketData are defined in src/types/global.d.ts\n// and imported if not automatically available in the global scope.\n// For this file, we'll re-declare simplified versions if not globally available.\n// It's better to import them from a central types file.\n\ninterface EventDetails {\n    name?: string;\n    date?: ethers.BigNumber; // Or string if pre-formatted\n    ticketPrice?: ethers.BigNumber;\n    ticketPriceInsider?: ethers.BigNumber;\n    ticketPriceOutsider?: ethers.BigNumber;\n    totalTickets?: ethers.BigNumber;\n    soldTickets?: ethers.BigNumber;\n    // Add other fields returned by your actual getEventDetails\n    isActive?: boolean; // Example from one of your previous getEventDetails\n    maxTickets?: ethers.BigNumber; // Renamed from totalTickets for consistency\n    currentTickets?: ethers.BigNumber; // Renamed from soldTickets\n}\n\n\n// --- Configuration ---\nconst CONTRACT_ADDRESS = process.env.REACT_APP_CONTRACT_ADDRESS || '0x6371647dc719E2482223c32880e2f2c9F44c9953'; // Default to your provided address\nconst TARGET_NETWORK_ID = parseInt(process.env.REACT_APP_TARGET_NETWORK_ID || '11155111', 10);\nconst TARGET_NETWORK_NAME = process.env.REACT_APP_TARGET_NETWORK_NAME || 'Sepolia Testnet';\n\nif (CONTRACT_ADDRESS === 'YOUR_DEPLOYED_EVENT_MANAGER_ADDRESS' || CONTRACT_ADDRESS === '0x0000000000000000000000000000000000000000') {\n    console.warn('Contract address not configured. Please set REACT_APP_CONTRACT_ADDRESS in your .env file.');\n    // toast.error('Contract address not configured in .env file.'); // Toast can be too early\n}\n\n// --- ABIs (User Provided) ---\nconst EVENT_MANAGER_ABI = [{\"type\":\"constructor\",\"inputs\":[{\"name\":\"_ticketNFT\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"_staking\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"_validator\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"_sybil\",\"type\":\"address\",\"internalType\":\"address\"}],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"buyTicket\",\"inputs\":[{\"name\":\"tokenURI\",\"type\":\"string\",\"internalType\":\"string\"},{\"name\":\"qrHash\",\"type\":\"string\",\"internalType\":\"string\"},{\"name\":\"outsider\",\"type\":\"bool\",\"internalType\":\"bool\"}],\"outputs\":[],\"stateMutability\":\"payable\"},{\"type\":\"function\",\"name\":\"cancelEvent\",\"inputs\":[],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"eventActive\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"bool\",\"internalType\":\"bool\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"getStakedAmount\",\"inputs\":[{\"name\":\"user\",\"type\":\"address\",\"internalType\":\"address\"}],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"getSybilScore\",\"inputs\":[{\"name\":\"user\",\"type\":\"address\",\"internalType\":\"address\"}],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"hasTicket\",\"inputs\":[{\"name\":\"\",\"type\":\"address\",\"internalType\":\"address\"}],\"outputs\":[{\"name\":\"\",\"type\":\"bool\",\"internalType\":\"bool\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"isOutsider\",\"inputs\":[{\"name\":\"\",\"type\":\"address\",\"internalType\":\"address\"}],\"outputs\":[{\"name\":\"\",\"type\":\"bool\",\"internalType\":\"bool\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"isValidator\",\"inputs\":[{\"name\":\"user\",\"type\":\"address\",\"internalType\":\"address\"}],\"outputs\":[{\"name\":\"\",\"type\":\"bool\",\"internalType\":\"bool\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"issuedTickets\",\"inputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"maxTickets\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"ownedTickets\",\"inputs\":[{\"name\":\"\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"owner\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\",\"internalType\":\"address\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"refillTickets\",\"inputs\":[{\"name\":\"amount\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"refunded\",\"inputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[{\"name\":\"\",\"type\":\"bool\",\"internalType\":\"bool\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"renounceOwnership\",\"inputs\":[],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"sellTicketBack\",\"inputs\":[{\"name\":\"tokenId\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"setEventActive\",\"inputs\":[{\"name\":\"active\",\"type\":\"bool\",\"internalType\":\"bool\"}],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"setTicketPrices\",\"inputs\":[{\"name\":\"insiderPrice\",\"type\":\"uint256\",\"internalType\":\"uint256\"},{\"name\":\"outsiderPrice\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"staking\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\",\"internalType\":\"contract Staking\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"sybil\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\",\"internalType\":\"contract SybilGuard\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"ticketCount\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"ticketNFT\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\",\"internalType\":\"contract TicketNFT\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"ticketPriceInsider\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"ticketPriceOutsider\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"transferOwnership\",\"inputs\":[{\"name\":\"newOwner\",\"type\":\"address\",\"internalType\":\"address\"}],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"validator\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\",\"internalType\":\"contract ValidatorPoS\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"withdrawFunds\",\"inputs\":[],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"event\",\"name\":\"OwnershipTransferred\",\"inputs\":[{\"name\":\"previousOwner\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"},{\"name\":\"newOwner\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"}],\"anonymous\":false},{\"type\":\"event\",\"name\":\"TicketPurchased\",\"inputs\":[{\"name\":\"buyer\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"},{\"name\":\"tokenId\",\"type\":\"uint256\",\"indexed\":false,\"internalType\":\"uint256\"}],\"anonymous\":false},{\"type\":\"event\",\"name\":\"TicketRefunded\",\"inputs\":[{\"name\":\"holder\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"},{\"name\":\"tokenId\",\"type\":\"uint256\",\"indexed\":false,\"internalType\":\"uint256\"}],\"anonymous\":false},{\"type\":\"error\",\"name\":\"OwnableInvalidOwner\",\"inputs\":[{\"name\":\"owner\",\"type\":\"address\",\"internalType\":\"address\"}]},{\"type\":\"error\",\"name\":\"OwnableUnauthorizedAccount\",\"inputs\":[{\"name\":\"account\",\"type\":\"address\",\"internalType\":\"address\"}]}];\nconst TICKET_NFT_ABI = [{\"type\":\"constructor\",\"inputs\":[{\"name\":\"initialOwner\",\"type\":\"address\",\"internalType\":\"address\"}],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"approve\",\"inputs\":[{\"name\":\"to\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"tokenId\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"balanceOf\",\"inputs\":[{\"name\":\"owner\",\"type\":\"address\",\"internalType\":\"address\"}],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"burn\",\"inputs\":[{\"name\":\"tokenId\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"eventManager\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\",\"internalType\":\"address\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"getApproved\",\"inputs\":[{\"name\":\"tokenId\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[{\"name\":\"\",\"type\":\"address\",\"internalType\":\"address\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"getQRHash\",\"inputs\":[{\"name\":\"tokenId\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[{\"name\":\"\",\"type\":\"string\",\"internalType\":\"string\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"isApprovedForAll\",\"inputs\":[{\"name\":\"owner\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"operator\",\"type\":\"address\",\"internalType\":\"address\"}],\"outputs\":[{\"name\":\"\",\"type\":\"bool\",\"internalType\":\"bool\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"mintTicket\",\"inputs\":[{\"name\":\"to\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"tokenURI\",\"type\":\"string\",\"internalType\":\"string\"},{\"name\":\"qrHash\",\"type\":\"string\",\"internalType\":\"string\"}],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"name\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"string\",\"internalType\":\"string\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"nextTokenId\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"owner\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\",\"internalType\":\"address\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"ownerOf\",\"inputs\":[{\"name\":\"tokenId\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[{\"name\":\"\",\"type\":\"address\",\"internalType\":\"address\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"qrHashes\",\"inputs\":[{\"name\":\"\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[{\"name\":\"\",\"type\":\"string\",\"internalType\":\"string\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"renounceOwnership\",\"inputs\":[],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"safeTransferFrom\",\"inputs\":[{\"name\":\"from\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"to\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"tokenId\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"safeTransferFrom\",\"inputs\":[{\"name\":\"from\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"to\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"tokenId\",\"type\":\"uint256\",\"internalType\":\"uint256\"},{\"name\":\"data\",\"type\":\"bytes\",\"internalType\":\"bytes\"}],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"setApprovalForAll\",\"inputs\":[{\"name\":\"operator\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"approved\",\"type\":\"bool\",\"internalType\":\"bool\"}],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"setEventManager\",\"inputs\":[{\"name\":\"_eventManager\",\"type\":\"address\",\"internalType\":\"address\"}],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"supportsInterface\",\"inputs\":[{\"name\":\"interfaceId\",\"type\":\"bytes4\",\"internalType\":\"bytes4\"}],\"outputs\":[{\"name\":\"\",\"type\":\"bool\",\"internalType\":\"bool\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"symbol\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"string\",\"internalType\":\"string\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"tokenURI\",\"inputs\":[{\"name\":\"tokenId\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[{\"name\":\"\",\"type\":\"string\",\"internalType\":\"string\"}],\"stateMutability\":\"view\"},{\"type\":\"function\",\"name\":\"transferFrom\",\"inputs\":[{\"name\":\"from\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"to\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"tokenId\",\"type\":\"uint256\",\"internalType\":\"uint256\"}],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"function\",\"name\":\"transferOwnership\",\"inputs\":[{\"name\":\"newOwner\",\"type\":\"address\",\"internalType\":\"address\"}],\"outputs\":[],\"stateMutability\":\"nonpayable\"},{\"type\":\"event\",\"name\":\"Approval\",\"inputs\":[{\"name\":\"owner\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"},{\"name\":\"approved\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"},{\"name\":\"tokenId\",\"type\":\"uint256\",\"indexed\":true,\"internalType\":\"uint256\"}],\"anonymous\":false},{\"type\":\"event\",\"name\":\"ApprovalForAll\",\"inputs\":[{\"name\":\"owner\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"},{\"name\":\"operator\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"},{\"name\":\"approved\",\"type\":\"bool\",\"indexed\":false,\"internalType\":\"bool\"}],\"anonymous\":false},{\"type\":\"event\",\"name\":\"BatchMetadataUpdate\",\"inputs\":[{\"name\":\"_fromTokenId\",\"type\":\"uint256\",\"indexed\":false,\"internalType\":\"uint256\"},{\"name\":\"_toTokenId\",\"type\":\"uint256\",\"indexed\":false,\"internalType\":\"uint256\"}],\"anonymous\":false},{\"type\":\"event\",\"name\":\"EventManagerSet\",\"inputs\":[{\"name\":\"newManager\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"}],\"anonymous\":false},{\"type\":\"event\",\"name\":\"MetadataUpdate\",\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\",\"indexed\":false,\"internalType\":\"uint256\"}],\"anonymous\":false},{\"type\":\"event\",\"name\":\"OwnershipTransferred\",\"inputs\":[{\"name\":\"previousOwner\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"},{\"name\":\"newOwner\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"}],\"anonymous\":false},{\"type\":\"event\",\"name\":\"TicketBurned\",\"inputs\":[{\"name\":\"user\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"},{\"name\":\"tokenId\",\"type\":\"uint256\",\"indexed\":true,\"internalType\":\"uint256\"}],\"anonymous\":false},{\"type\":\"event\",\"name\":\"TicketMinted\",\"inputs\":[{\"name\":\"to\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"},{\"name\":\"tokenId\",\"type\":\"uint256\",\"indexed\":true,\"internalType\":\"uint256\"},{\"name\":\"tokenURI\",\"type\":\"string\",\"indexed\":false,\"internalType\":\"string\"},{\"name\":\"qrHash\",\"type\":\"string\",\"indexed\":false,\"internalType\":\"string\"}],\"anonymous\":false},{\"type\":\"event\",\"name\":\"Transfer\",\"inputs\":[{\"name\":\"from\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"},{\"name\":\"to\",\"type\":\"address\",\"indexed\":true,\"internalType\":\"address\"},{\"name\":\"tokenId\",\"type\":\"uint256\",\"indexed\":true,\"internalType\":\"uint256\"}],\"anonymous\":false},{\"type\":\"error\",\"name\":\"ERC721IncorrectOwner\",\"inputs\":[{\"name\":\"sender\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"tokenId\",\"type\":\"uint256\",\"internalType\":\"uint256\"},{\"name\":\"owner\",\"type\":\"address\",\"internalType\":\"address\"}]},{\"type\":\"error\",\"name\":\"ERC721InsufficientApproval\",\"inputs\":[{\"name\":\"operator\",\"type\":\"address\",\"internalType\":\"address\"},{\"name\":\"tokenId\",\"type\":\"uint256\",\"internalType\":\"uint256\"}]},{\"type\":\"error\",\"name\":\"ERC721InvalidApprover\",\"inputs\":[{\"name\":\"approver\",\"type\":\"address\",\"internalType\":\"address\"}]},{\"type\":\"error\",\"name\":\"ERC721InvalidOperator\",\"inputs\":[{\"name\":\"operator\",\"type\":\"address\",\"internalType\":\"address\"}]},{\"type\":\"error\",\"name\":\"ERC721InvalidOwner\",\"inputs\":[{\"name\":\"owner\",\"type\":\"address\",\"internalType\":\"address\"}]},{\"type\":\"error\",\"name\":\"ERC721InvalidReceiver\",\"inputs\":[{\"name\":\"receiver\",\"type\":\"address\",\"internalType\":\"address\"}]},{\"type\":\"error\",\"name\":\"ERC721InvalidSender\",\"inputs\":[{\"name\":\"sender\",\"type\":\"address\",\"internalType\":\"address\"}]},{\"type\":\"error\",\"name\":\"ERC721NonexistentToken\",\"inputs\":[{\"name\":\"tokenId\",\"type\":\"uint256\",\"internalType\":\"uint256\"}]},{\"type\":\"error\",\"name\":\"OwnableInvalidOwner\",\"inputs\":[{\"name\":\"owner\",\"type\":\"address\",\"internalType\":\"address\"}]},{\"type\":\"error\",\"name\":\"OwnableUnauthorizedAccount\",\"inputs\":[{\"name\":\"account\",\"type\":\"address\",\"internalType\":\"address\"}]}];\n\ninterface NetworkInfo { chainId: number; name: string; }\n\n// --- Helper Functions ---\nconst getProvider = (): ethers.BrowserProvider | null => { /* ... as provided in step 7 ... */ };\nconst getSigner = async (provider: ethers.BrowserProvider): Promise<ethers.Signer | null> => { /* ... as provided in step 7 ... */ };\nconst getEventManagerContract = async (readOnly = false): Promise<ethers.Contract | null> => { /* ... as provided in step 7 ... */ };\nconst getTicketNFTContract = async (readOnly = false): Promise<ethers.Contract | null> => { /* ... as provided in step 7 ... */ };\n\n\n// --- Core Blockchain Functions ---\nexport const connectWallet = async (): Promise<string | null> => { /* ... as provided in step 7 ... */ };\nexport const checkNetwork = async (): Promise<{ isCorrect: boolean; currentNetwork: NetworkInfo | null }> => { /* ... as provided in step 7 ... */ };\n\n// Corrected switchNetwork (no argument)\nexport const switchNetwork = async (): Promise<boolean> => {\n    const provider = getProvider();\n    if (!provider || !window.ethereum) {\n        toast.error(\"MetaMask is not available to switch network.\");\n        return false;\n    }\n    try {\n        // Ethers v6 uses ethers.toQuantity for chainId\n        await window.ethereum.request({\n            method: 'wallet_switchEthereumChain',\n            params: [{ chainId: ethers.toQuantity(TARGET_NETWORK_ID) }],\n        });\n        return true;\n    } catch (switchError: any) {\n        console.error('Network switch failed:', switchError);\n        if (switchError.code === 4902) { // Chain not added\n             toast.error(`Network \"${TARGET_NETWORK_NAME}\" not added to MetaMask. Please add it manually.`);\n             // TODO: Optionally add wallet_addEthereumChain logic here\n        } else if (switchError.code === 4001) { // User rejected\n             toast.info('Network switch request rejected by user.');\n        } else {\n             toast.error('Failed to switch network.');\n        }\n        return false;\n    }\n};\n\n// Corrected buyTicket\nexport const buyTicket = async (\n    tokenURI: string,\n    qrHash: string,\n    outsider: boolean,\n    priceInEther: string // Expect price string here\n): Promise<string | null> => {\n    const contract = await getEventManagerContract(false);\n    if (!contract) throw new Error(\"EventManager Contract not available for transaction.\");\n    if (!priceInEther) throw new Error(\"Price is required to buy ticket.\");\n\n    try {\n        const value = parseEther(priceInEther);\n        console.log(`Calling EventManager.buyTicket with URI: ${tokenURI}, QR: ${qrHash}, Outsider: ${outsider}, Value: ${value.toString()}`);\n        const tx = await contract.buyTicket(tokenURI, qrHash, outsider, { value });\n        const receipt = await tx.wait(); // Wait for 1 confirmation\n        console.log(`Transaction Confirmed: ${receipt?.transactionHash}`);\n        return receipt?.transactionHash ?? null;\n    } catch (error: any) {\n        console.error(\"Buy Ticket Error:\", error);\n        const reason = error.reason || error?.data?.message || error.message || 'Unknown error during purchase.';\n        if (error.code === 4001) throw new Error('Transaction rejected by user.');\n        throw new Error(`Purchase Failed: ${reason}`);\n    }\n};\n\n// --- CORRECTED getMyTickets using Event Querying ---\nexport const getMyTickets = async (userAddress: string): Promise<number[]> => {\n    if (!userAddress) {\n        console.warn(\"getMyTickets: userAddress is undefined or null.\");\n        return [];\n    }\n\n    const provider = getProvider();\n    const nftContract = await getTicketNFTContract(true); // Get read-only NFT contract\n\n    if (!provider || !nftContract) {\n        console.error(\"getMyTickets: Could not get Provider or TicketNFT contract instance.\");\n        throw new Error(\"Failed to connect to NFT contract for fetching tickets.\");\n    }\n\n    try {\n        const nftContractAddress = await nftContract.getAddress();\n        console.log(`Querying Transfer events for recipient ${userAddress} on NFT contract ${nftContractAddress}`);\n\n        const filterTo = nftContract.filters.Transfer(null, userAddress);\n        const filterFrom = nftContract.filters.Transfer(userAddress);\n\n        // It's better to get a starting block for performance, but 'earliest' can work for testing.\n        // const startBlock = 0; // Or a more recent block number\n        const transferEventsTo = await nftContract.queryFilter(filterTo, 'earliest', 'latest');\n        const transferEventsFrom = await nftContract.queryFilter(filterFrom, 'earliest', 'latest');\n\n        console.log(`Found ${transferEventsTo.length} Transfer(to) events and ${transferEventsFrom.length} Transfer(from) events.`);\n\n        const ownedTokenIds = new Map<number, boolean>();\n        transferEventsTo.forEach((event: any) => { // Use 'any' for event if specific type is complex\n            if (event.args && typeof event.args.tokenId !== 'undefined') {\n                ownedTokenIds.set(Number(event.args.tokenId), true);\n            }\n        });\n        transferEventsFrom.forEach((event: any) => {\n            if (event.args && typeof event.args.tokenId !== 'undefined') {\n                ownedTokenIds.delete(Number(event.args.tokenId));\n            }\n        });\n\n        const finalOwnedIds = Array.from(ownedTokenIds.keys());\n        console.log(\"Final calculated owned ticket IDs:\", finalOwnedIds);\n        return finalOwnedIds.sort((a, b) => a - b); // Sort for consistency\n\n    } catch (error: any) {\n        console.error(\"Error querying Transfer events in getMyTickets:\", error);\n        throw new Error(\"Failed to fetch owned tickets. Contract interaction failed.\");\n    }\n};\n\n// resellTicket (uses EventManager)\nexport const resellTicket = async (tokenId: number): Promise<string | null> => {\n    const contract = await getEventManagerContract(false);\n    if (!contract) throw new Error(\"EventManager Contract not available for transaction.\");\n    try {\n        console.log(`Calling EventManager.sellTicketBack(${tokenId})`);\n        const tx = await contract.sellTicketBack(tokenId);\n        const receipt = await tx.wait();\n        console.log(`Resale Confirmed: ${receipt?.transactionHash}`);\n        return receipt?.transactionHash ?? null;\n    } catch (error: any) {\n        console.error(`Resell Ticket Error (ID: ${tokenId}):`, error);\n        const reason = error.reason || error?.data?.message || error.message || 'Unknown error during resale.';\n        if (error.code === 4001) throw new Error('Transaction rejected by user.');\n        throw new Error(`Resale Failed: ${reason}`);\n    }\n};\n\n// getEventDetails (uses EventManager)\nexport const getEventDetails = async (): Promise<EventDetails | null> => {\n    const contract = await getEventManagerContract(true);\n    if (!contract) {\n        console.error(\"getEventDetails: EventManager contract instance is null.\");\n        return null;\n    }\n    try {\n        console.log(\"Fetching event details from EventManager contract...\");\n        const details: EventDetails = {\n            ticketPriceInsider: await contract.ticketPriceInsider(),\n            ticketPriceOutsider: await contract.ticketPriceOutsider(),\n            maxTickets: await contract.maxTickets(),\n            soldTickets: await contract.ticketCount(),\n            isActive: await contract.eventActive(), // Assuming eventActive is part of your contract\n            // Add other relevant fields like eventName, eventDate if they exist as view functions\n        };\n        console.log(\"Successfully fetched event details:\", details);\n        return details;\n    } catch (error) {\n        console.error(\"Failed to fetch event details from contract:\", error);\n        toast.error(\"Error fetching event details from blockchain.\");\n        return null;\n    }\n};\n\n// getTokenMetadataURI (uses TicketNFT)\nexport const getTokenMetadataURI = async (tokenId: number): Promise<string | null> => {\n    const nftContract = await getTicketNFTContract(true);\n    if (!nftContract) return null;\n    try {\n        const uri = await nftContract.tokenURI(tokenId);\n        return uri;\n    } catch (error: any) {\n        console.error(`Error getting token URI for token ${tokenId}:`, error.message);\n        return null;\n    }\n};\n\n// --- Updated getAvailableTickets (fetches ALL issued IDs from EventManager) ---\nexport const getAvailableTickets = async (): Promise<number[]> => {\n    const contract = await getEventManagerContract(true);\n    if (!contract) return [];\n    try {\n        const countBN = await contract.ticketCount();\n        const count = Number(countBN);\n        if (count === 0) {\n            console.log(\"No tickets issued yet according to ticketCount.\");\n            return [];\n        }\n\n        console.log(`Total tickets issued (ticketCount): ${count}. Fetching IDs from issuedTickets array...`);\n        const ids: number[] = [];\n        // Your 'issuedTickets' in EventManager is a public array getter `issuedTickets(uint256 index)`\n        // Loop from 0 to count-1 to get each tokenId\n        for (let i = 0; i < count; i++) {\n            try {\n                const tokenIdBN = await contract.issuedTickets(i);\n                ids.push(Number(tokenIdBN));\n            } catch (loopError) {\n                console.error(`Error fetching issued ticket at index ${i}:`, loopError);\n                // Break or continue based on how you want to handle gaps if any\n                break;\n            }\n        }\n        console.log(\"All issued ticket IDs fetched from EventManager:\", ids);\n        return ids;\n    } catch (error) {\n        console.error(\"Error getting available/issued tickets:\", error);\n        toast.error(\"Could not retrieve list of issued tickets.\");\n        return [];\n    }\n};\n\n// getQRHash (uses TicketNFT)\nexport const getQRHash = async (tokenId: number): Promise<string | null> => {\n    const nftContract = await getTicketNFTContract(true);\n    if (!nftContract) return null;\n    try {\n        const qrHash = await nftContract.getQRHash(tokenId);\n        return qrHash;\n    } catch (error: any) {\n        console.error(`Error getting QR Hash for token ${tokenId}:`, error.message);\n        return null;\n    }\n};\n\n// --- (Removed testContractSetup and debugContractInterface for brevity, can be added back if needed) ---"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}